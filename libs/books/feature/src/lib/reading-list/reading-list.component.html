<!-- ERROR TEXT SECTION for Reading List -->
<ng-container *ngIf="readingListError$ | async">
  <p
    aria-live="assertive"
    class="error-text font-weight-bold"
    data-testing="error-text-reading-list"
  >
    {{ readingListConstants.ERROR_TEXT }}
  </p>
</ng-container>

<ng-container *ngIf="(readingList$ | async).length > 0; else empty">
  <mat-card class="reading-list-item" *ngFor="let item of readingList$ | async">
    <div>
      <img
        data-testing="book-cover"
        class="book-cover"
        [src]="item.coverUrl"
        alt="book cover"
      />
    </div>
    <div class="reading-list-item-details">
      <span class="font-weight-bold" data-testing="book-title" [title]="item.title">
      {{ item.title }}
    </span>
      <br />
      <span data-testing="book-author-name">
        {{
          item.authors?.join(', ') || readingListConstants.NO_AUTHOR_MENTIONED
        }}
      </span>
      <div class="finished-date" *ngIf="item.finished">
        <span data-testing="finished-book-on">
          {{ readingListConstants.READING_LIST.FINISHED_BOOK_ON }}:
          {{
            item.finishedDate
              | date: readingListConstants.BOOK_SEARCH.DATE_FORMAT
          }}
        </span>
      </div>
    </div>
    <!-- DISABLED TICK ICON WHEN BOOK IS MARKED AS FINISHED -->
    <button *ngIf="item.finished; else markAsFinished" mat-icon-button disabled>
      <mat-icon>{{ readingListConstants.READING_LIST.DONE_ALL }}</mat-icon>
    </button>

    <!-- ENABLED TICK ICON TO MARK BOOK AS FINISHED -->
    <ng-template #markAsFinished>
      <button
        mat-icon-button
        data-testing="mark-as-finished"
        class="mark-as-finished"
        [attr.aria-label]="'Mark ' + item.title + ' as finished'"
        (click)="markBookAsFinished(item)"
      >
        <mat-icon>{{
          readingListConstants.READING_LIST.CHECK_CIRCLE
        }}</mat-icon>
      </button>
    </ng-template>

    <!-- REMOVE BOOK ICON -->
    <button
      mat-icon-button
      data-testing="remove-book"
      color="warn"
      [attr.aria-label]="'Remove ' + item.title + ' from reading list'"
      (click)="removeFromReadingList(item)"
    >
      <mat-icon>{{ readingListConstants.READING_LIST.REMOVE_CIRCLE }}</mat-icon>
    </button>
  </mat-card>
</ng-container>
<ng-template #empty>
  <p data-testing="empty-text" class="empty">
    {{ readingListConstants.READING_LIST.EMPTY_LIST_TEXT }}
  </p>
</ng-template>
